<template>
  <div>
    <svg xmlns="http://www.w3.org/2000/svg" style="position: absolute;width: 0;height:0;left:0;top: 0">
      <symbol id="purchaseList" viewBox="0 0 1024 1024">
        <ellipse class="st0" cx="573.6" cy="730.3" rx="13.9" ry="13.9"/>
        <polygon class="st0"
                 points="421.3,482.5 360.8,457.2 340.6,505.4 400.9,530.7 380.5,578 495.5,541.3 441.7,434.5 	"/>
        <path class="st0" d="M998.4,428.7C916.1,242.1,781.6,107.6,594.9,25.3c-44-17.9-122.2-17.9-166.3,0
		C242,106.8,107.5,241.3,25.2,428.7c-17.9,44-17.9,122.2,0,166.3C107.5,781.6,242,916.1,428.7,998.4c44,17.9,122.2,17.9,166.3,0
		c186.7-82.2,321.1-216.7,403.5-403.3C1017.1,551.1,1017.1,472.8,998.4,428.7z M475.1,727.1c-0.9,0-1.6,0-3.3-0.9l-250.2-80.7
		c-8.1-2.5-10.6-9-8.1-17.1c2.5-8.1,9.8-8.1,18.8-4.9l248.5,79.9C476.7,714.1,475.1,715.7,475.1,727.1z M500.3,671.7L206.8,582
		l109.2-338.3l149.2,45.7l-30.1,93.7l30.1,9.8l30.1-93.7l160.6,53l-95.3,283.7l-12.3,4.9c-16.3,4.1-31,13-42.4,25.3L500.3,671.7z
		 M573.6,798c-37.5,0-67.7-30.1-67.7-67.7s30.1-67.7,67.7-67.7c37.5,0,67.7,30.1,67.7,67.7C642.1,767.9,611.9,798,573.6,798z
		 M859.8,376.6l-163,30.1l-80.7,240.4c-9-4.9-13.9-6.5-23.6-8.1l80.7-240.4l0,0l4.9-16.3l174.4-28.5c9-1.6,15.5-0.9,17.1,8.1
		C870.4,370.9,868.8,374.9,859.8,376.6z"/>
      </symbol>
      <symbol id="deliverGoods" viewBox="0 0 1024 1024">
        <path class="st0" d="M998.3,428.8C916,242.2,781.5,107.7,594.9,25.4c-44-17.9-122.2-17.9-166.2,0C242,107.7,107.6,242.2,25.3,428.8
	c-17.9,44-17.9,122.2,0,166.2c82.2,186.8,216.6,321.2,403.3,403.5c44,17.9,122.2,17.9,166.2,0C781.5,916.3,916,781.8,998.3,595.2
	C1017.1,551.2,1017.1,472.8,998.3,428.8z M419.7,713.3c0,0-53,57-50.5,17.9c0,0-14.6-27.8-65.2-4.9c0,0-29.4,10.6-4.9-28.5
	c0,0,18.8-43.2-4.9-44c0,0-33.4-8.1-4.9-31c0,0,36.7-53.8,54.7-14.6c0,0,9,61.2,63.5,65.2C406.5,672.6,448.9,688.9,419.7,713.3z
	 M510.8,772.1c-44.8-14.6-30.1-84.8-30.1-84.8c9-37.5-29.4-39.2-29.4-39.2c-79.1-4.1-87.2-97.8-87.2-97.8
	c-1.6-19.5-72.5-11.4-72.5-11.4c-15.5,1.6-38.3-11.4-38.3-11.4c-17.1-44,108.4-138.6,108.4-138.6c42.4-17.9,106.8-11.4,106.8-11.4
	C594,257.7,770.1,252.1,770.1,252.1c13,164.6-123.1,309-123.1,309C680.5,693.7,510.8,772.1,510.8,772.1z"/>
      </symbol>
      <symbol id="downloadForm" viewBox="0 0 1024 1024">
        <path class="st0" d="M597.5,13.7c191.1,84.1,328.8,221.7,412.9,412.9c18.6,45.1,18.6,125.3,0,170.4
		c-84.1,191.1-221.7,328.8-412.9,412.9c-45.1,18.6-125.3,18.6-170.4,0C235.9,925.7,98.3,788.1,14.2,596.9
		c-18.6-45.1-18.6-125.3,0-170.4C98.3,235.4,235.9,97.8,427.1,13.7C472.1-4.9,552.4-4.9,597.5,13.7L597.5,13.7zM321.6,493.7c53.4,53.7,106.9,107.3,160.5,160.8c5.2,5.1,10.7,10,16.6,14.2c9.9,7.1,18,6.9,28.1-0.1
				c2.5-1.7,4.9-3.6,7.1-5.7c13.9-13.4,27.8-26.7,41.5-40.4c42.5-42.5,84.9-85.1,127.3-127.7c3-3,5.6-6.4,7.9-10
				c4.9-7.8,3-12-5.9-13.9c-3.3-0.7-6.8-1-10.3-1c-23.1-0.2-46.3-0.4-69.4-0.2c-5.6,0-7.1-1.6-7.1-7.1c0.2-53,0.2-106,0.1-159
				c0-40.3-27-67.1-67.4-67.1c-25.8,0-51.6,0-77.4,0c-39.5,0.1-66.6,27-66.6,66.6c-0.1,25.6,0,51.2,0,76.8c0,27.6-0.2,55.2,0.1,82.8
				c0.1,5.8-1.9,7-7.2,7c-23.3-0.2-46.7,0-70.1,0.3c-4.4,0.1-8.9,0.8-13.2,2c-4.5,1.2-6.5,4.5-3.8,8.8
				C315.2,485.3,317.9,490,321.6,493.7z M787.5,645.6v-6.6h-34c-8,0-8,0-8,7.8c0,25,0.1,50,0,74.9c-0.1,11.4-5.6,19.7-15.3,22.3
				c-3.5,1-7.2,1-10.8,1c-138.1,0-276.2,0-414.3,0c-2.4,0-4.9,0-7.3-0.3c-9.7-1.1-17.3-8.7-18.5-18.3c-0.3-2.6-0.3-5.3-0.3-7.9
				c0-24.6,0-49.1-0.1-73.7c0-2.3,1.2-5.8-3.2-5.8c-12.7,0-25.5,0-38.8,0v6.7c0,25-0.1,49.9,0,74.9c0.1,39.1,27.2,66.4,66.3,66.4
				c139.3,0,278.6,0,417.9,0c39.1,0,66.2-27.3,66.2-66.5C787.5,695.5,787.5,670.6,787.5,645.6z"/>
        
      </symbol>
      <symbol id="goodsManage" viewBox="0 0 1024 1024">
        <path class="st0" d="M998.3,428.8C916,242.2,781.5,107.7,594.9,25.4c-44-17.9-122.2-17.9-166.2,0C242,107.7,107.6,242.2,25.3,428.8
	c-17.9,44-17.9,122.2,0,166.2c82.2,186.8,216.6,321.2,403.3,403.5c44,17.9,122.2,17.9,166.2,0C781.5,916.3,916,781.8,998.3,595.2
	C1017.1,551.2,1017.1,472.8,998.3,428.8z M483.2,772.1H268.1V556h215.1V772.1z M483.2,502.2H268.1V287.1h215.1v116.6v0.9V502.2z
	 M753,556v0.9v216H537.9V556.8h98.6L483.6,404.1l152-152l153.2,151.6L636.4,556H753z"/>
      </symbol>
      <symbol id="historyPrice" viewBox="0 0 1024 1024">
        <path class="st0" d="M998.6,428.9C916.2,242.2,781.8,107.7,595.1,25.4c-44-17.9-122.3-17.9-166.3,0
	C242.2,107.8,107.7,242.2,25.4,428.9c-17.9,44-17.9,122.3,0,166.3c82.4,186.7,216.8,321.2,403.5,403.5c44,17.9,122.3,17.9,166.3,0
	c186.7-82.4,321.2-216.8,403.5-403.5C1016.6,551.1,1016.6,472.9,998.6,428.9z M512.9,772c-139.4,0-252.7-116.5-252.7-260h-59.5
	l94.5-97.8l94.5,97.8h-59.5c0.9,103.5,82.4,187.5,182.5,187.5c61.1,0,114.9-31,148.4-79l50.5,51.4C665.3,732.9,593.5,772,512.9,772z
	 M420.7,521c-5.8-0.9-10.6-2.5-13-6.5c-3.3-3.3-4.9-8.1-5.8-13.9c0.9-5.8,2.5-9.8,5.8-13c3.3-3.3,7.4-5.8,13-5.8h46.5l-43.3-57
	c-2.5-2.5-4.1-5.8-5.8-9.8c-1.6-4-2.5-8.1-2.5-13c0.9-5.8,3.3-10.6,6.5-14.6c3.3-4.1,9-6.5,17.9-7.4c4.9,0,9.8,2.5,13.9,4.9
	c4.1,3.3,7.4,6.5,9.8,9.8l48.9,70.9l53.8-71.8c2.5-3.3,5.8-6.5,9.8-9.8c4.1-3.3,9-4.9,13.9-4.9c3.3,0,6.5,0.9,9,1.6
	c2.5,0.9,4.9,1.6,7.4,3.3c2.5,1.6,4.1,3.3,4.9,6.5c1.6,2.5,2.5,6.5,3.3,10.6c0,6.5-2.5,12.3-6.5,17.9l-49.8,62h47.5
	c5.8,0.9,9.8,2.5,13,5.8c3.3,3.3,4.9,8.1,5.8,13c0,5.8-2.5,10.6-5.8,13.9c-3.3,4.1-8.1,5.8-13,6.5h-61.1v19.5h62
	c5.8,0.9,9.8,2.5,13,6.5c3.3,4.1,4.9,8.1,5.8,13.9c-0.9,5.8-2.5,9.8-5.8,13.9c-3.3,4.1-7.4,5.8-13,6.5h-62v34.3
	c-0.9,17.9-10.6,27.8-30.1,27.8c-9.8,0-17.1-2.5-22-6.5c-4.9-4.9-8.1-11.4-8.1-20.4v-33.4h-62c-5.8-0.9-10.6-2.5-13-7.4
	c-3.3-4.1-4.9-9-5.8-14.6c0.9-5.8,2.5-9.8,5.8-13c3.3-3.3,7.4-5.8,13-5.8h62v-20.4L420.7,521z M730.4,610.6l-94.5-97.8h59.5
	c0-0.9,0-0.9,0-1.6C695.4,407.7,613,323,512.9,323c-62,0-116.5,31.8-150,80.6l-50.5-51.4c46.5-61.1,119-101,199.7-101
	c139.4,0,252.7,116.5,252.7,260.8c0,0.9,0,0.9,0,1.6H785h39.1L730.4,610.6z"/>
      </symbol>
    </svg>
    <div class="account-wrapper">
      <div class="head">
        <div class="avatar">
          <img src="http://www.gogagoga.cc/picfile/yhtx/no.jpg" alt="">
        </div>
        <p @click="haha">账号：{{getUser.data.mAccount}}</p>
        <p>岗位：{{getUser.data.strType}}</p>
        <a href="#" class="p-quit" @click.prevent="quit">
          <svg>
            <use xlink:href="#quit"></use>
          </svg>
        </a>
      </div>
      <div v-if="getUser.type == 2">
        <router-link :to="{name:'adminJinhuo'}" class="cell">
          <svg class="icon">
            <use xlink:href="#purchaseList"></use>
          </svg>
          <div class="p-title">
            进货列表
          </div>
          <svg class="right">
            <use xlink:href="#right"></use>
          </svg>
        </router-link>
        <router-link :to="{name:'adminSend'}" class="cell">
          <svg class="icon">
            <use xlink:href="#deliverGoods"></use>
          </svg>
          <div class="p-title">
            发货管理
          </div>
          <svg class="right">
            <use xlink:href="#right"></use>
          </svg>
        </router-link>
        <router-link :to="{name:'adminGoods'}" class="cell">
          <svg class="icon">
            <use xlink:href="#goodsManage"></use>
          </svg>
          <div class="p-title">
            商品管理
          </div>
          <svg class="right">
            <use xlink:href="#right"></use>
          </svg>
        </router-link>
        <router-link v-if="isPc" :to="{name:'down'}" class="cell">
          <svg class="icon">
            <use xlink:href="#downloadForm"></use>
          </svg>
          <div class="p-title">
            表格下载
          </div>
          <svg class="right">
            <use xlink:href="#right"></use>
          </svg>
        </router-link>

        <!--<div class="cell">-->
          <!--<svg class="icon">-->
            <!--<use xlink:href="#historyPrice"></use>-->
          <!--</svg>-->
          <!--<div class="p-title">-->
            <!--历史价格-->
          <!--</div>-->
          <!--<svg class="right">-->
            <!--<use xlink:href="#right"></use>-->
          <!--</svg>-->
        <!--</div>-->
      </div>
      <div v-if="getUser.type == 1">
        <router-link :to="{name:'jinhuo'}" class="cell">
          <svg class="icon">
            <use xlink:href="#purchaseList"></use>
          </svg>
          <div class="p-title">
            进货列表
          </div>
          <svg class="right">
            <use xlink:href="#right"></use>
          </svg>
        </router-link>
      </div>
    </div>
  </div>
</template>
<script lang="babel">
  import {mapGetters} from 'vuex'
  import {cookie} from '@/utils'
  export default {
    data () {
      return {
        isPc:false
      }
    },
    created () {
      this.haha()
      console.log(this.isPc)
    },
    computed: {
      ...mapGetters({
        getUser: 'global/getUser'
      })
    },
    async mounted() {
      if(this.getUser.type === 0) {
        this.$router.push({name:'login'})
        return ;
      }
      try {
        await this.$store.dispatch('global/getAccount');
      } catch (error) {

      }
    },
    methods: {
      quit () {
        cookie('TOKEN', '');
        this.$store.dispatch('global/toast', '注销成功');
        window.location.reload()
      },
      checkUser () {
        let u = navigator.userAgent, app = navigator.appVersion;   
           return {//移动终端浏览器版本信息
                trident: u.indexOf('Trident') > -1, //IE内核
                presto: u.indexOf('Presto') > -1, //opera内核
                webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
                ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                iPhone: u.indexOf('iPhone') > -1 , //是否为iPhone或者QQHD浏览器
                iPad: u.indexOf('iPad') > -1, //是否iPad
                webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
        }
      },
      haha () {
        if(this.checkUser().mobile || this.checkUser().ios || this.checkUser().android ||   
          this.checkUser().iPhone || this.checkUser().iPad){        
            this.isPc = false      
        }else{
          this.isPc = true
        }
      }
    }
  }
</script>
<style lang="less" rel="stylesheet/less">
  .account-wrapper {
    background-color: #fff;
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    overflow: auto;
    .head {
      height: 500/75rem;
      background: url("../../assets/account-bg.png") no-repeat center bottom;
      background-size: cover;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      .avatar {
        position: relative;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        border: 4px solid #fff;
        margin: 0 auto;
        overflow: hidden;
        background-color: #fff;
        box-shadow: 0px 8/75rem 20/75rem #ffc892;
        margin-bottom: 50/75rem;
        img {
          display: block;
          width: 100%;
          height: 100%;
        }
      }
      p {
        font-size: 36/75rem;
        color: #4d4d4d;
        line-height: 1.5;
      }
      .p-quit{
        display: block;
        position: absolute;
        right: 30/75rem;
        top: 30/75rem;
        svg{
          width: 65/75rem;
          height: 65/75rem;
          fill: #666;
        }
      }
    }
    .cell {
      height: 186/75rem;
      display: flex;
      align-items: center;
      padding: 0 38/75rem;
      transition: all .3s;
      &:active{
        background-color:#f0f0f0;
      }
      .icon {
        width: 128/75rem;
        height: 128/75rem;
        fill: #ffb230;
        margin-right: 33/75rem;
      }
      .p-title {
        flex: 1;
        font-size: 32/75rem;
        color: #b2b2b2;
      }
      .right {
        width: 33/75rem;
        height: 33/75rem;
        color: #b3b3b3;
      }
    }
  }
</style>
